<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roomify - Listing Details</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chatbot CSS -->
    <link rel="stylesheet" href="../shared/chatbot.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #3a86ff;
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 20px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: #3a86ff;
        }
        
        /* Main Content Styles */
        .listing-container {
            display: flex;
            flex-wrap: wrap;
            margin: 30px 0;
            gap: 30px;
        }
        
        .listing-images {
            flex: 1;
            min-width: 300px;
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
        }
        
        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-thumbnails {
            display: flex;
            gap: 10px;
            overflow-x: auto;
        }
        
        .thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .thumbnail.active {
            border: 2px solid #3a86ff;
        }
        
        .listing-details {
            flex: 1;
            min-width: 300px;
            background-color: #fff;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        }
        
        .listing-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .listing-title {
            font-size: 28px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .listing-location {
            display: flex;
            align-items: center;
            color: #666;
            margin-bottom: 15px;
        }
        
        .listing-location i {
            margin-right: 5px;
        }
        
        .listing-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .tag {
            background-color: #e9f2ff;
            color: #3a86ff;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .listing-rating {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .stars {
            color: #ffc107;
            margin-right: 10px;
        }
        
        .rating-value {
            font-weight: 600;
            margin-right: 5px;
        }
        
        .reviews-count {
            color: #666;
        }
        
        .listing-description {
            margin-bottom: 25px;
            color: #555;
            line-height: 1.7;
        }
        
        .amenities-section {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: #333;
        }
        
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .amenity {
            display: flex;
            align-items: center;
        }
        
        .amenity i {
            color: #3a86ff;
            margin-right: 10px;
            width: 20px;
        }
        
        .booking-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .price-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .price {
            font-size: 28px;
            font-weight: 700;
            color: #333;
        }
        
        .price-period {
            font-size: 16px;
            color: #666;
            font-weight: normal;
        }
        
        .booking-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .book-btn {
            background-color: #3a86ff;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        
        .book-btn:hover {
            background-color: #2667cc;
        }
        
        /* Photo Upload Section */
        .photo-upload-section {
            background-color: #fff;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        }
        
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
            margin-bottom: 20px;
        }
        
        .upload-area:hover {
            border-color: #3a86ff;
        }
        
        .upload-area i {
            font-size: 48px;
            color: #3a86ff;
            margin-bottom: 15px;
        }
        
        .upload-text {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .upload-subtext {
            color: #666;
            margin-bottom: 15px;
        }
        
        .upload-btn {
            background-color: #3a86ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .upload-btn:hover {
            background-color: #2667cc;
        }
        
        .uploaded-photos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .uploaded-photo {
            position: relative;
            border-radius: 5px;
            overflow: hidden;
            height: 150px;
        }
        
        .uploaded-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .delete-photo {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #ff4757;
        }
        
        /* Chat Box Styles */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 450px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            transform: translateY(calc(100% + 20px));
            transition: transform 0.3s ease;
        }
        
        .chat-container.open {
            transform: translateY(0);
        }
        
        .chat-header {
            background-color: #3a86ff;
            color: white;
            padding: 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-title {
            font-weight: 600;
            font-size: 16px;
        }
        
        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .message.guest {
            align-self: flex-end;
            background-color: #3a86ff;
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .message.host {
            align-self: flex-start;
            background-color: #f1f3f5;
            color: #333;
            border-bottom-left-radius: 5px;
        }
        
        .message-time {
            font-size: 11px;
            margin-top: 5px;
            opacity: 0.7;
            text-align: right;
        }
        
        .chat-input-area {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
            outline: none;
        }
        
        .chat-send {
            background-color: #3a86ff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #3a86ff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 999;
        }
        
        .chat-toggle i {
            font-size: 24px;
        }
        
        /* Footer Styles */
        footer {
            background-color: #333;
            color: #fff;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 30px;
        }
        
        .footer-section {
            flex: 1;
            min-width: 200px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #3a86ff;
        }
        
        .footer-bottom {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #aaa;
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .listing-container {
                flex-direction: column;
            }
            
            .chat-container {
                width: 100%;
                height: 70%;
                bottom: 0;
                right: 0;
                border-radius: 10px 10px 0 0;
            }
            
            .chat-toggle {
                bottom: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="../Home Page/index.html" class="logo">Roomify</a>
                <ul class="nav-links">
                 <li><a href="../Home Page/index.html">Home</a></li>
                 <li><a href="../Home Page/index.html">Search</a></li>
                 <li><a href="../profile and bookings/profile&bookings.html">My Bookings</a></li>
                 <li><a href="../profile and bookings/profile&bookings.html">Profile</a></li>
                </ul>

            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Listing Details -->
        <div class="listing-container">
            <div class="listing-images">
                <div class="main-image">
                    <img id="main-image" src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80" alt="Luxury Apartment">
                </div>
                <div class="image-thumbnails">
                    <div class="thumbnail active" data-image="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 1">
                    </div>
                    <div class="thumbnail" data-image="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80">
                        <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 2">
                    </div>
                    <div class="thumbnail" data-image="https://images.unsplash.com/photo-1513584684374-8bab748fbf90?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80">
                        <img src="https://images.unsplash.com/photo-1513584684374-8bab748fbf90?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 3">
                    </div>
                    <div class="thumbnail" data-image="https://images.unsplash.com/photo-1493809842364-78817add7ffb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80">
                        <img src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 4">
                    </div>
                </div>
            </div>
            
            <div class="listing-details">
                <div class="listing-header">
                    <h1 class="listing-title">Luxury Apartment with City View</h1>
                    <div class="listing-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Downtown, New York</span>
                    </div>
                    <div class="listing-tags">
                        <span class="tag">Apartment</span>
                        <span class="tag">City View</span>
                        <span class="tag">Luxury</span>
                        <span class="tag">Free WiFi</span>
                    </div>
                    <div class="listing-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <span class="rating-value">4.5</span>
                        <span class="reviews-count">(128 reviews)</span>
                    </div>
                </div>
                
                <div class="listing-description">
                    <p>This stunning luxury apartment offers breathtaking city views from its floor-to-ceiling windows. Located in the heart of downtown, you'll have easy access to the best restaurants, shopping, and entertainment the city has to offer.</p>
                    <p>The apartment features a modern kitchen with high-end appliances, a spacious living area, and a comfortable bedroom with a king-sized bed. Perfect for both short and extended stays.</p>
                </div>
                
                <div class="amenities-section">
                    <h2 class="section-title">Amenities</h2>
                    <div class="amenities-grid">
                        <div class="amenity">
                            <i class="fas fa-wifi"></i>
                            <span>Free WiFi</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-tv"></i>
                            <span>Smart TV</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-utensils"></i>
                            <span>Fully Equipped Kitchen</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-snowflake"></i>
                            <span>Air Conditioning</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-parking"></i>
                            <span>Free Parking</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-swimming-pool"></i>
                            <span>Swimming Pool</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-dumbbell"></i>
                            <span>Fitness Center</span>
                        </div>
                        <div class="amenity">
                            <i class="fas fa-hot-tub"></i>
                            <span>Hot Tub</span>
                        </div>
                    </div>
                </div>
                
                <div class="booking-section">
                    <div class="price-section">
                        <div class="price">$189 <span class="price-period">/ night</span></div>
                        <div class="listing-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                    
                    <form class="booking-form">
                        <div class="form-group">
                            <label for="check-in">Check-in</label>
                            <input type="date" id="check-in" required>
                        </div>
                        <div class="form-group">
                            <label for="check-out">Check-out</label>
                            <input type="date" id="check-out" required>
                        </div>
                        <div class="form-group">
                            <label for="guests">Guests</label>
                            <select id="guests" required>
                                <option value="1">1 Guest</option>
                                <option value="2" selected>2 Guests</option>
                                <option value="3">3 Guests</option>
                                <option value="4">4 Guests</option>
                            </select>
                        </div>
                        <a href="../Booking Form/booking-form.html" class="book-btn">Book Now</a>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Photo Upload Section -->
        <div class="photo-upload-section">
            <h2 class="section-title">Upload Your Photos</h2>
            <p>Share your experience by uploading photos of your stay.</p>
            
            <div class="upload-area" id="upload-area">
                <i class="fas fa-cloud-upload-alt"></i>
                <div class="upload-text">Drag & Drop your photos here</div>
                <div class="upload-subtext">or</div>
                <input type="file" id="file-input" accept="image/*" multiple style="display: none;">
                <button class="upload-btn" id="browse-btn">Browse Files</button>
            </div>
            
            <div class="uploaded-photos" id="uploaded-photos">
                <!-- Uploaded photos will appear here -->
            </div>
        </div>
    </div>

    <!-- Chat Toggle Button -->
    <div class="chat-toggle" id="chat-toggle">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Chat Box -->
    <div class="chat-container" id="chat-container">
        <div class="chat-header">
            <div class="chat-title">Chat with Host</div>
            <button class="chat-close" id="chat-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <div class="message host">
                Hello! Thanks for your interest in our property. How can I help you?
                <div class="message-time">10:30 AM</div>
            </div>
            <div class="message guest">
                Hi! I'm interested in booking for next weekend. Is the apartment available from Friday to Sunday?
                <div class="message-time">10:32 AM</div>
            </div>
            <div class="message host">
                Yes, those dates are available! Would you like to proceed with the booking?
                <div class="message-time">10:33 AM</div>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" class="chat-input" id="chat-input" placeholder="Type your message...">
            <button class="chat-send" id="chat-send">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Roomify</h3>
                    <p>Find your perfect stay with Roomify. We connect travelers with unique accommodations around the world.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="../Home Page/index.html">Home</a></li>
                        <li><a href="../Home Page/index.html">Search</a></li>
                        <li><a href="../listing-page/listing.html">List Your Property</a></li>
                        <li><a href="../Home Page/index.html">About Us</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> support@roomify.com</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Travel St, City, Country</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Roomify. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Image Thumbnail Selection
        document.querySelectorAll('.thumbnail').forEach(thumb => {
            thumb.addEventListener('click', function() {
                // Remove active class from all thumbnails
                document.querySelectorAll('.thumbnail').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked thumbnail
                this.classList.add('active');
                
                // Update main image
                const mainImage = document.getElementById('main-image');
                mainImage.src = this.getAttribute('data-image');
            });
        });

        // Photo Upload Functionality
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('file-input');
        const browseBtn = document.getElementById('browse-btn');
        const uploadedPhotos = document.getElementById('uploaded-photos');

        // Open file browser when clicking upload area or browse button
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        browseBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            fileInput.click();
        });

        // Handle file selection
        fileInput.addEventListener('change', function(e) {
            const files = e.target.files;
            handleFiles(files);
        });

        // Handle drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#3a86ff';
            uploadArea.style.backgroundColor = '#f0f7ff';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#ddd';
            uploadArea.style.backgroundColor = 'transparent';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#ddd';
            uploadArea.style.backgroundColor = 'transparent';
            
            const files = e.dataTransfer.files;
            handleFiles(files);
        });

        // Process uploaded files
        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // Check if file is an image
                if (!file.type.match('image.*')) {
                    alert('Please upload only image files.');
                    continue;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const photoDiv = document.createElement('div');
                    photoDiv.className = 'uploaded-photo';
                    
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-photo';
                    deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                    deleteBtn.addEventListener('click', function() {
                        photoDiv.remove();
                    });
                    
                    photoDiv.appendChild(img);
                    photoDiv.appendChild(deleteBtn);
                    uploadedPhotos.appendChild(photoDiv);
                };
                
                reader.readAsDataURL(file);
            }
        }

        // Chat Functionality
        const chatToggle = document.getElementById('chat-toggle');
        const chatContainer = document.getElementById('chat-container');
        const chatClose = document.getElementById('chat-close');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const chatSend = document.getElementById('chat-send');

        // Toggle chat visibility
        chatToggle.addEventListener('click', () => {
            chatContainer.classList.toggle('open');
        });

        // Close chat
        chatClose.addEventListener('click', () => {
            chatContainer.classList.remove('open');
        });

        // Send message
        function sendMessage() {
            const messageText = chatInput.value.trim();
            
            if (messageText) {
                // Create new message element
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message guest';
                
                const messageContent = document.createElement('div');
                messageContent.textContent = messageText;
                
                const messageTime = document.createElement('div');
                messageTime.className = 'message-time';
                messageTime.textContent = getCurrentTime();
                
                messageDiv.appendChild(messageContent);
                messageDiv.appendChild(messageTime);
                
                chatMessages.appendChild(messageDiv);
                
                // Clear input
                chatInput.value = '';
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Simulate host response after a delay
                setTimeout(simulateHostResponse, 1500);
            }
        }

        // Send message on button click
        chatSend.addEventListener('click', sendMessage);

        // Send message on Enter key
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Get current time in HH:MM format
        function getCurrentTime() {
            const now = new Date();
            return `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
        }

        // Simulate host response
        function simulateHostResponse() {
            const responses = [
                "Thanks for your message! How can I assist you further?",
                "I'll check that for you right away.",
                "Yes, that's available for your selected dates.",
                "Is there anything specific you'd like to know about the property?",
                "We'd be happy to host you! Would you like to proceed with booking?"
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message host';
            
            const messageContent = document.createElement('div');
            messageContent.textContent = randomResponse;
            
            const messageTime = document.createElement('div');
            messageTime.className = 'message-time';
            messageTime.textContent = getCurrentTime();
            
            messageDiv.appendChild(messageContent);
            messageDiv.appendChild(messageTime);
            
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Booking form submission
        document.querySelector('.booking-form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Booking request submitted! You will be redirected to the payment page.');
            // In a real application, this would process the booking and redirect to payment
        });
    </script>
    
    <!-- Chatbot Component -->
    <button id="chatbot-icon" aria-label="Open chat support" type="button">
        <i class="fas fa-comments"></i>
    </button>
    <div id="chatbot-box">
        <div id="chatbot-header">
            <h4>Roomify Assistant</h4>
            <button id="chatbot-close" aria-label="Close chat">Ã—</button>
        </div>
        <div id="chatbot-messages"></div>
        <div id="chatbot-input-area">
            <input type="text" id="chatbot-user-input" placeholder="Type your message..." autocomplete="off">
            <button id="chatbot-send-btn" aria-label="Send message">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
    
    <!-- Chatbot JS -->
    <script src="../shared/chatbot.js"></script>
</body>
</html>